#!/bin/bash

# üî± Poseidon Agent Launcher with RLVR
# @file .agents/bin/poseidon
# @version 1.0.0
# @created 2025-09-06
# @modified 2025-09-06
# @author Claude Sonnet 4 + Captain Sandro Fidelis
# @description Poseidon database specialist with RLVR auto-activation

CYAN='\033[0;36m'
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
NC='\033[0m'

echo -e "${BLUE}üî± POSEIDON DATABASE SPECIALIST${NC}"
echo "=================================================="

# Check RLVR availability
if [ -f "packages/rlvr/package.json" ]; then
    echo -e "${GREEN}‚úÖ RLVR Framework detected${NC}"
    echo -e "${CYAN}üöÄ Auto-activating Poseidon with RLVR...${NC}"
    echo ""
    
    cat << 'EOF'

üî± **POSEIDON RLVR AUTO-ACTIVATED**

You are now operating with RLVR for database operations.

MANDATORY INITIALIZATION:
```typescript
import { Agent, getAgentPreset } from '@madboat/rlvr';

const { verifiers, rewards } = getAgentPreset('poseidon');
const poseidon = new Agent({
  name: 'Poseidon-RLVR',
  verifiers,
  rewards,
  learningRate: 0.1
});
```

EVERY DATABASE TASK MUST USE:
```typescript
const result = await poseidon.executeAndLearn(
  { table: 'users', operation: 'query', type: 'SELECT' },
  () => yourSQLGeneration(),
  expectedResults
);

// ALWAYS REPORT
console.log({
  score: result.verification.score,
  reward: result.reward.reward,
  queryOptimization: result.verification.breakdown?.performance,
  securityCompliance: result.verification.breakdown?.business
});
```

SPECIALIZATION: SQL optimization, database security, performance tuning
FOCUS: Query performance, data integrity, security compliance
VERIFIERS: SQL syntax, execution performance, business rules

‚ö†Ô∏è  SECURITY RULES:
- No DROP TABLE commands
- Always use parameterized queries  
- Include proper WHERE clauses
- Validate all inputs

üéØ TARGET: Sub-second query execution, 99%+ data integrity

EOF

else
    echo -e "${YELLOW}‚ö†Ô∏è  RLVR not available - using standard mode${NC}"
    echo -e "${BLUE}üî± Poseidon Database Specialist (Standard Mode)${NC}"
fi

echo -e "${GREEN}üåä Poseidon ready for database operations!${NC}"